<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CineBook - Movie Ticket Booking</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <div class="container">
        <header>
            <h1>ðŸŽ¬ CineBook</h1>
            <p>Your Ultimate Movie Booking Experience</p>
        </header>

        <div class="tabs">
            <button class="tab active" onclick="showTab('movies')">Browse Movies</button>
            <button class="tab" onclick="showTab('booking')">Book Tickets</button>
            <button class="tab" onclick="showTab('mybookings')">My Bookings</button>
        </div>

        <div id="movies" class="tab-content active">
            <h2>Now Showing</h2>
            <!-- Sorting Buttons -->
            <div style="margin-bottom: 15px;">
                <button class="btn" style="width: auto; padding: 8px 16px; margin-right:10px;" onclick="sortMoviesBy('price')">Sort by Price</button>
                <button class="btn" style="width: auto; padding: 8px 16px;" onclick="sortMoviesBy('title')">Sort by Title</button>
            </div>
            <div class="movies-grid" id="moviesGrid"></div>
        </div>

        <div id="booking" class="tab-content">
            <div class="booking-section">
                <h2>Book Your Tickets</h2>
                <div id="bookingMessage" class="message"></div>

                <div class="form-group">
                    <label>Select Movie</label>
                    <select id="movieSelect" onchange="updateShowtimes()">
                        <option value="">Choose a movie</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Select Date</label>
                    <input type="date" id="dateSelect" onchange="updateShowtimes()">
                </div>

                <div class="form-group">
                    <label>Select Showtime</label>
                    <select id="showtimeSelect" onchange="loadSeats()">
                        <option value="">Choose a showtime</option>
                    </select>
                </div>

                <div class="seats-container" id="seatsContainer" style="display: none;">
                    <h3>Select Your Seats</h3>
                    <div class="screen">SCREEN</div>
                    <div class="seats-grid" id="seatsGrid"></div>

                    <!-- Auto-assign seats button -->
                    <div style="text-align:center; margin-top:15px;">
                        <button class="btn" style="width:auto; padding:8px 16px;" onclick="loadSeats(true)">Auto-Assign Best Seats</button>
                    </div>

                    <div class="seat-legend">
                        <div class="legend-item">
                            <div class="legend-color" style="background: #28a745;"></div>
                            <span>Available</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background: #667eea;"></div>
                            <span>Selected</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background: #dc3545;"></div>
                            <span>Booked</span>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label>Your Name</label>
                    <input type="text" id="customerName" placeholder="Enter your name">
                </div>

                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="customerEmail" placeholder="Enter your email">
                </div>

                <div class="form-group">
                    <label>Phone</label>
                    <input type="tel" id="customerPhone" placeholder="Enter your phone number">
                </div>

                <div class="summary" id="bookingSummary" style="display: none;">
                    <h3>Booking Summary</h3>
                    <div class="summary-item">
                        <span>Movie:</span>
                        <span id="summaryMovie">-</span>
                    </div>
                    <div class="summary-item">
                        <span>Date & Time:</span>
                        <span id="summaryDateTime">-</span>
                    </div>
                    <div class="summary-item">
                        <span>Seats:</span>
                        <span id="summarySeats">-</span>
                    </div>
                    <div class="summary-item">
                        <span>Tickets:</span>
                        <span id="summaryTickets">0</span>
                    </div>
                    <div class="summary-item summary-total">
                        <span>Total Amount:</span>
                        <span id="summaryTotal">â‚¹0</span>
                    </div>
                </div>

                <button class="btn" onclick="confirmBooking()">Confirm Booking</button>
            </div>
        </div>

        <div id="mybookings" class="tab-content">
            <h2>My Bookings</h2>
            <div class="form-group" style="max-width: 400px;">
                <label>Enter Email or Phone to View Bookings</label>
                <input type="text" id="searchBooking" placeholder="Email or Phone">
                <button class="btn" onclick="searchBookings()" style="margin-top: 10px;">Search Bookings</button>
            </div>
            <div class="bookings-list" id="bookingsList"></div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
